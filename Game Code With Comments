#Department of Chemcial Engineering, Faculty of Engineering 
#University of Waterloo
#Started November 6, 2025

#CS = Corey Shelston
#SA = Sejal Atodaria

"""Pong, classic arcade game.

Exercises

1. Change the colors.
2. What is the frame rate? Make it faster or slower.
3. Change the speed of the ball.
4. Change the size of the paddles.
5. Change how the ball bounces off walls.
6. How would you add a computer player?
6. Add a second ball.
"""

from random import choice, random #CS: Imports choice and random functions from Python's random module. Does so because choice will randomly pick element from a list (used for balls direction), and random with generate float between 0 and 1 (used for ball's speed).
from turtle import * #CS: Imports all of the functions from turtle module. Using * imports every function in turtle. Will be used to draw graphics for game (paddle, ball, etc)

from freegames import vector #CS: imports vector from freegames module. Vector represents 2D points or directions, which will be used for the ball's movements. 


def value(): #CS: Function that generates a random speed and direction for the ball so each game starts with unpredictable movement.
    """Randomly generate value between (-5, -3) or (3, 5).""" 
    return (3 + random() * 2) * choice([1, -1]) #CS: Generates a random speed between 3 and 5, then randomly makes it positive or negative so the ball moves unpredictably in both directions.


ball = vector(0, 0) #CS: Creates a vector at (0,0) to represent the starting position of the ball at the center of the screen.
aim = vector(value(), value()) #CS: Creates a vector for the ball's movement, using random x and y speeds to give initial direction and speed variability.
state = {1: 0, 2: 0} #CS: Initializes a dictionary to store each paddle's vertical position, allowing easy updates by player number.


def move(player, change): #CS: Function that changes a player’s paddle position by the given amount so players can control their paddles.
    """Move player position by change."""
    state[player] += change #CS: Adds the change value to the selected player's paddle position to move it up or down.


def rectangle(x, y, width, height): #CS: Function that draws a solid rectangle at a specified position with given size to represent a paddle
    """Draw rectangle at (x, y) with given width and height."""
    up() #CS: Prepares to move to the rectangle’s starting point without drawing anything so no extra lines appear by lifting pen (drawing device).
    goto(x, y) #CS: Moves to the top-left corner of the rectangle so it starts drawing in the correct location.
    down() #CS: Starts drawing so the rectangle shape is visible on the screen. Puts pen down to draw. 
    begin_fill() #CS: Begins filling the shape so the rectangle appears as a solid block rather than just an outline.
    for count in range(2): #CS: Repeats the rectangle drawing steps twice. 'for' starts a loop, 'count' is the loop variable, 'in' iterates over the sequence, and 'range(2)' generates 0 and 1 to repeat the block two times.
        forward(width) #CS: Draws the top or bottom side of the rectangle so the horizontal part of the shape is created. Moves in the direction the line is facing by width. 
        left(90) #CS: Changes direction 90° (left) to draw the vertical side next, forming a right angle for the rectangle.
        forward(height) #CS: Draws the left or right side of the rectangle so the vertical part of the shape is complete. 
        left(90) #CS: Turns again 90° (left) to align with the next horizontal side, completing the rectangle’s perimeter.
    end_fill() #CS: Fills the rectangle so it appears as a solid paddle on the screen.


def draw(): #SA: The main function that runs the game and draws the interface for the game.
    """Draw game and move pong ball."""
    clear() #SA: Introduces a blank interface to print and run the game
    rectangle(-200, state[1], 10, 50) #SA: Prints the rectangle on the left side of the screen (200 units to the left)
    rectangle(190, state[2], 10, 50) #SA: Prints the rectangle on the right side of the screen (190 units to the right)

    ball.move(aim) 
    x = ball.x
    y = ball.y

    up()
    goto(x, y)
    dot(10) #SA: Draws a dot of size 10
    update()

    if y < -200 or y > 200: #SA: Checks if the ball is at the top edge or bottom edge of the interface
        aim.y = -aim.y #SA: Redirects the ball by making it bounce off the ceiling or the floor of the interface

    if x < -185: #SA: If statement that deals with the ball once it reaches the left edge of the game interface
        low = state[1] #SA: Sets the lower bounds of the left paddle on the screen according to the 'state' dictionary
        high = state[1] + 50 #SA: Sets the upper bounds of the left paddle on the screen according to the 'state' dictionary

        if low <= y <= high: #SA: checks to see if the ball has hit the bounds paddle of the left paddle
            aim.x = -aim.x #SA: Redirects the ball in the opposite direction 
        else:
            return

    if x > 185:
        low = state[2]
        high = state[2] + 50

        if low <= y <= high:
            aim.x = -aim.x
        else:
            return

    ontimer(draw, 50)


setup(420, 420, 370, 0)
hideturtle()
tracer(False)
listen() #SA: Sode that opens up keyboard inputs
onkey(lambda: move(1, 20), 'w') #SA: Moves left paddle up 20 pixels on the screen when the 'w' key pressed on the keyboard
onkey(lambda: move(1, -20), 's') #SA: Moves left paddle down 20 pixels on the screen when the 's' key is pressed on the keyboard
onkey(lambda: move(2, 20), 'i') #SA: Moves right paddle up 20 pixels on the screen when the 'i' key is pressed on the keyboard
onkey(lambda: move(2, -20), 'k') #SA: Moves right paddle down 20 pixels on the screen when the 'k' key is pressed on the keyboard
draw() #SA: Calls the draw function to run the game
done() #SA: Ends the game and the screen/game interface freezes
